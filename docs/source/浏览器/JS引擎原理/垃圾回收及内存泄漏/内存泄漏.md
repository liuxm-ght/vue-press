### 内存泄漏
  1. 概念：
    * 引擎中有垃圾回收机制，它主要针对一些程序中不再使用的对象，对其清理回收释放掉内存。
      那么垃圾回收机制会把不再使用的对象（垃圾）全都回收掉吗？
      其实引擎虽然针对垃圾回收做了各种优化从而尽可能的确保垃圾得以回收，但并不是说我们就可以完全不用关心这块了，我们代码中依然要主动避免一些不利于引擎做垃圾回收操作，
    * 因为不是所有无用对象内存都可以被回收的，那当不再用到的对象内存，没有及时被回收时，我们叫它 内存泄漏（Memory leak）。

  2. 常见内存泄漏：
      1. 不正当使用闭包：
        * 解决方法是：闭包返回的函数使用后，及时清理
      
      2. 隐式全局变量：
        函数内不声明变量，会被隐式转为全局变量，当函数被销毁时，变量还在，由于全局变量一般不会被垃圾回收给清除，所以会造成资源浪费，即内存泄漏；
        * 解决方法是：声明局部变量，全局变量临时使用后主动设置为null清空；可借助lint等工具检查代码

      3. 游离DOM引用：
        开发中，考虑到性能问题，通常会提前声明变量引用来 缓存 DOM节点，但在移除DOM节点后，不清空变量引用的话，会造成DOM节点游离，无法释放
        * 解决方法是：DOM节点移除时，同时null清空变量

      4. 遗忘的定时器：
        * 解决方法是：及时null清空 setTimeout 和 setInterval

      5. 遗忘的事件监听：
        组件监听了事件，如果在销毁时未主动清除，那么事件不会被GC清除，造成内存泄漏
        * 解决方法是：以Vue组件为例，当created时监听了resize事件，那么在beforeDestroy要去移除resize事件的监听

      6. 遗忘的监听者模式：
        使用了监听模式监听事件(如EventBus)时，如果组件被销毁，不主动清除该事件，那么同样事件不会被GC清除，造成内存泄漏
        * 解决方法是：以Vue组件为例，当created时 eventBus.on ，那么在beforeDestroy要去移除 eventBus.off

      7. 遗忘的Map、Set对象：
        当使用 Map 或 Set 存储对象时，同 Object 一致都是强引用，如果不将其主动清除引用，其同样会造成内存不自动进行回收。
        * 解决方法是：使用WeakMap、WeakSet 对象允许存储对象弱引用的唯一值，弱引用是可以被GC清除的

      8. 未清理的Console输出
        因为浏览器保存了我们输出对象的信息数据引用，也正是因此未清理的 console 如果输出了对象也会造成内存泄漏。
        * 解决方法是：生成环境要清除掉console的打印，
         





















  3. 内存泄漏排查、定位、修复
      1. 排查问题：
        利用浏览器控制台（Chrome Devtool ）的 Performance 这一面板，之前叫 Timeline
        * 勾选 Memory ，查看 Heap 的走向，相同操作两次，每次操作完clear下，看最后Heap的线图是不是越来越高

      2. 定位问题：
        Memory 面板
        * 勾选 Heap Profiling，查看前后快照Comparison的Delta，如果是正数，那么代表有内存泄漏，查看构造函数位置

      3. 修复问题：
        具体情况具体修复

  4. 内存三大件：
    其实前端关于内存方面主要有三个问题，我把它们亲切的称作内存三大件：
    1. 内存泄漏 我们说很久了，对象已经不再使用但没有被回收，内存没有被释放，即内存泄漏，那想要避免就避免让无用数据还存在引用关系，也就是多注意我们上面说的常见的几种内存泄漏的情况。
    2. 内存膨胀 即在短时间内内存占用极速上升到达一个峰值，想要避免需要使用技术手段减少对内存的占用。
    3. 频繁 GC 同这个名字，就是 GC 执行的特别频繁，一般出现在频繁使用大的临时变量导致新生代空间被装满的速度极快，而每次新生代装满时就会触发 GC，频繁 GC 同样会导致页面卡顿，想要避免的话就不要搞太多的临时变量，因为临时变量不用了就会被回收，这和我们内存泄漏中说避免使用全局变量冲突，其实，只要把握好其中的度，不太过分就 OK。

<!-- 参考链接：https://juejin.cn/post/6984188410659340324 -->
